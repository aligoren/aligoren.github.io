<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="C Dangling Pointer Sorunu">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>C Dangling Pointer Sorunu | Ali GÖREN</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://aligoren.com/c-dangling-pointer-sorunu/">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="description" itemprop="description" content="C Dangling Pointer Sorunu">
<meta name="author" content="Ali">
<link rel="prev" href="../isimtescilnetin-domain-rezaleti/" title="İsimTescil.Net’in Domain Rezaleti" type="text/html">
<link rel="next" href="../e-sayisinin-hesaplanmasi/" title="E Sayısının Hesaplanması" type="text/html">
<meta property="og:site_name" content="Ali GÖREN">
<meta property="og:title" content="C Dangling Pointer Sorunu">
<meta property="og:url" content="https://aligoren.com/c-dangling-pointer-sorunu/">
<meta property="og:description" content="C Dangling Pointer Sorunu">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-07-21T00:00:00+03:00">
<meta property="article:tag" content="c">
<meta property="article:tag" content="programlama">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://aligoren.com/">

                <span id="blog-title">Ali GÖREN</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../hakkimda">Hakkımda</a>
                </li>
<li>
<a href="../archive.html">Arşiv</a>
                </li>
<li>
<a href="../categories/index.html">Kategoriler</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">C Dangling Pointer Sorunu</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ali</span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2014-07-21T00:00:00+03:00" itemprop="datePublished" title="2014-07-21">2014-07-21</time></a></p>
                <p class="commentline">
        
    <a href=".#disqus_thread" data-disqus-identifier="cache/posts/c-dangling-pointer-sorunu.html">Comments</a>


            

                <meta name="description" itemprop="description" content="C Dangling Pointer Sorunu"></p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Bir pointer düşünelim bu pointer’ı bir değişkene atayalım. Sonra ikinci bir pointer olduğunu varsayalım bu ikinci pointer’ı da ilk pointer’a atayalım. Bu durumda iki pointer da aynı adrese bakmış oluyor. Bu durum <a href="http://en.wikipedia.org/wiki/Segmentationfault">segmentation fault</a> hatasina sebep olmaktadir ve <a href="http://en.wikipedia.org/wiki/Bufferoverflow">Buffer Overflow</a> yapılmasına davet çıkardığı için güvenlik açığı oluşturabilir.</p>
<p>İlk pointer fflush ve stding parametresiyle temizleniyor yani deallocate ediliyor varsayalım. Bu durumda bu bölgenin değeri nil olmakta. Ve bu durumda ikinci pointer dangling pointer yani sarkıtılmış gösterge(o kadar çevirisini aradım en mantıklısı bu oldu) olmakta.</p>
<p>Çözüm için bazı yöntemler var. Bunlardan birisi akıllı pointer kullanımıdır. C++11 ile kullanımı biten <code>auto_ptr</code> ve onun yerine gelen <code>unique_ptr</code> kullanılabilir ilk yöntemlerdir.
<!-- TEASER_END -->
Bir de bunun başka bir alternatifi olarak tombstone metodu var. Burada da yapılan şey pointer değişkenin başına başka bir değer ekliyoruz.</p>
<p>Öncelikle bahsettiğimiz konuya dair bir örnek kod verelim.</p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/0.png"></p>
<p>Bu hataya yakalanmış bir kodun çıktısı şöyle olacaktır. Tabii bu sistemden sisteme göre değişir. Aslında bu çıktı çöp bir değerdir.</p>
<p><strong>Örneğin koding.com sanal makinesinde yaptığım denemenin sonucu:</strong></p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/1.png"></p>
<p>Bu da kendi makinemde yaptığım işlemin sonucu:</p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/2.png"></p>
<p>Bu hatanın bize verdiği çıktılar compile time’da şöyle olacaktır:</p>
<p><strong>warning: function returns address of local variable [-Wreturn-local-addr]</strong></p>
<p>ya da</p>
<p><strong>warning: function returns address of local variable</strong></p>
<p>Bu hataları alıyorsak derleme zamanında demek ki bir yerlerde dangling pointer oluşmuştur. Bunu çözmemiz aslında basit. Verdiğimiz kodda oluşturduğumuz x değişkenini static variable’a çevirmemiz yetecektir.</p>
<p>Yani bu durumda şöyle bir değişiklik olacak:</p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/01.png"></p>
<p>Şimdi artık bu kodumuz dangling pointerdan arındırılmış vaziyette. Buradaki x değişkeni yerel bir değişkendir. x değişkeninin adresi cagri işlevi içerisinde döndürüldükten sonra sıfırlandı. Ancak pointer hala bu adresi işaret ediyordu. Dangling pointer hatasının açıklaması buydu. Biz bu değişiklik ile bu hatayı çözüme kavuşturmuş olduk.</p>
<p>Koding sanal makinesindeki çıktı:</p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/3.png"></p>
<p>Kendi makinemdeki çıktı:</p>
<p><img alt="/galleries/cdp/1.png" src="../galleries/cdp/4.png"></p>
<h2>Referanslar:</h2>
<p><a href="https://software.intel.com/en-us/articles/pointer-checker-to-detect-buffer-problems-and-dangling-pointers-part-2">https://software.intel.com/en-us/articles/pointer-checker-to-detect-buffer-problems-and-dangling-pointers-part-2</a></p>
<p><a href="https://www.owasp.org/images/f/fa/OWASPIL8DanglingPointer.pdf">https://www.owasp.org/images/f/fa/OWASPIL8DanglingPointer.pdf</a></p>
<p><a href="https://www.blackhat.com/presentations/bh-usa-07/Afek/Whitepaper/bh-usa-07-afek-WP.pdf">https://www.blackhat.com/presentations/bh-usa-07/Afek/Whitepaper/bh-usa-07-afek-WP.pdf</a></p>
<p><a href="http://www.ccs.neu.edu/home/will/CPP/dangling.html">http://www.ccs.neu.edu/home/will/CPP/dangling.html</a></p>
<p><a href="http://www.codeproject.com/Articles/378335/Dangling-Pointers-Pathology-Prevention-and-Cure">http://www.codeproject.com/Articles/378335/Dangling-Pointers-Pathology-Prevention-and-Cure</a></p>
<p><a href="http://www.democraticprogrammers.com/dangling-pointer-problem-cpp-example/">http://www.democraticprogrammers.com/dangling-pointer-problem-cpp-example/</a></p>
<p><a href="http://www.c4learn.com/c-programming/c-dangling-pointer-causes/">http://www.c4learn.com/c-programming/c-dangling-pointer-causes/</a></p>
<p><a href="http://www.geekinterview.com/question_details/66703">http://www.geekinterview.com/question_details/66703</a></p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/c/" rel="tag">c</a></li>
            <li><a class="tag p-category" href="../categories/programlama/" rel="tag">programlama</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../isimtescilnetin-domain-rezaleti/" rel="prev" title="İsimTescil.Net’in Domain Rezaleti">Previous post</a>
            </li>
            <li class="next">
                <a href="../e-sayisinin-hesaplanmasi/" rel="next" title="E Sayısının Hesaplanması">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="aligren",
            disqus_url="https://aligoren.com/c-dangling-pointer-sorunu/",
        disqus_title="C Dangling Pointer Sorunu",
        disqus_identifier="cache/posts/c-dangling-pointer-sorunu.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="aligren";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:goren.ali@yandex.com">Ali</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
