<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="sys.argv Yerine Click Kullanın">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>sys.argv Yerine Click Kullanın | Ali GÖREN</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://aligoren.com/python-sys-argv-yerine-click-kullanin/">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="description" itemprop="description" content="sys.argv Yerine Click Kullanın">
<meta name="author" content="Ali">
<link rel="prev" href="../e-sayisinin-hesaplanmasi/" title="E Sayısının Hesaplanması" type="text/html">
<link rel="next" href="../hamming-sayilari/" title="Hamming Sayıları" type="text/html">
<meta property="og:site_name" content="Ali GÖREN">
<meta property="og:title" content="sys.argv Yerine Click Kullanın">
<meta property="og:url" content="https://aligoren.com/python-sys-argv-yerine-click-kullanin/">
<meta property="og:description" content="sys.argv Yerine Click Kullanın">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-11-12T00:00:00+02:00">
<meta property="article:tag" content="programlama">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://aligoren.com/">

                <span id="blog-title">Ali GÖREN</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../hakkimda">Hakkımda</a>
                </li>
<li>
<a href="../archive.html">Arşiv</a>
                </li>
<li>
<a href="../categories/index.html">Kategoriler</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">sys.argv Yerine Click Kullanın</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Ali</span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2015-11-12T00:00:00+02:00" itemprop="datePublished" title="2015-11-12">2015-11-12</time></a></p>
                <p class="commentline">
        
    <a href=".#disqus_thread" data-disqus-identifier="cache/posts/python-sys-argv-yerine-click-kullanin.html">Comments</a>


            

                <meta name="description" itemprop="description" content="sys.argv Yerine Click Kullanın"></p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Python ile konsol uygulamaları geliştirirken, konsolda bazen programı direkt olarak çağırmadan parametre kontrolü yapmamız gerekebiliyor. Örneğin şöyle bir çağrı:</p>
<p><code>program.py --falan=filan</code></p>
<p>Bu program basit ilkel yöntemlerce sys.argv kontrolü şeklinde yapılmakta. Ancak bunun doğruluğu için dahi uzunca uğraşmak gerekiyor.</p>
<p>Bu sorunu aşmak için çeşitli kütüphaneler mevcuttur. Örneğin argparse, docopt gibi kütüphaneler de bu soruna kolaylık sağlıyorlar. Ancak bunların yapıları gerçekten çok karmaşık. Örneğin argparse interspersed dediğimiz argümanların devre dışı bırakılmasını desteklemiyor. Bu güvenlik açısından bir sorun oluşturabilir. <!--TEASER_END--> Bu gibi bazı sorunlarla karşılaşmayı önlemek açısından Click, Armin Ronacher tarafından geliştirildi. Click kurulumu pip üzerinden yapılmakta.</p>
<p><code>pip install Click</code></p>
<p>komutu ile kurulumu yapabilirsiniz. Python 2.x ve 3.x sürümlerini desteklediğini de söylemek iyi olacaktır.</p>
<p>Kurulumdan sonra ilk olarak basit bir Merhaba uygulaması yapabiliriz.</p>
<pre class="code literal-block"><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">merhaba</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s">'Merhaba'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">merhaba</span><span class="p">()</span>
</pre>


<p>Click’i import ettikten sonra <code>command</code> decoratörünü çağırarak artık bunun click ile kontrol edileceğini söyleyebiliriz.</p>
<p>Ayrıca click <code>print()</code> harici kendisi <code>click.echo()</code> işlevi ile printer görevini sağlayabiliyor. İlk uygulamamız bu oldu ve çalıştırma işlemini yapalım. Sonuçlara bakalım. Örneğin bu yukarıdaki kodları hello.py adında bir dosyanın içerisine yazdığımızı varsayalım.</p>
<pre class="code literal-block">ali@linux $ hello
Merhaba

ali@linux $ hello -h
Error: no such option: -h

ali@linux $ hello --h
Error: no such option: --h  Did you mean --help?

ali@linux $ hello --help
Usage: hello.py [OPTIONS]

Options:
  --help  Show this message and exit.
</pre>


<p>Merhaba kısmından daha çok otomatik oluşturulan help sayfalarının dikkatinizi çektiğini umuyorum. Evet click otomatik olarak help sayfası oluşturabiliyor. Bunu siz yapmadan yapabiliyor.</p>
<p>Örnek olarak ilk parametrelerimi tanımlayalım ve bununla ilgili bir program yapalım. Programın işlevi girilen adı, girilen sayı kadar yazdırmak olsun. Bunun normalde for döngüsü ile basitçe yapılacağını biliyoruz.</p>
<pre class="code literal-block">sayaç =&gt; girilen sayı:
    yazdır: girilen isim
</pre>


<p>Evet sahte kodu bu şekilde. Normalde Python ile yapmak isteseydik de bu format üzerinden gidecektik. Şimdi tekrar Click ile geliştirmeye dönelim. Öncelikle <code>option()</code> ve <code>argument()</code> decoratörlerini ekleyelim ve bunlara alması gereken değerleri bildirelim. Bu eklenen değerleri de yani decoratörler içerisinde tanımlanan option ve argument değerlerini de kendimize ait olan işleve işlev değişken olarak atayalım.</p>
<pre class="code literal-block"><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s">'--count'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">'Kac defa yazdiracagiz?'</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s">'isim'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">'Ali'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">merhaba</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">isim</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s">'Merhaba'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">merhaba</span><span class="p">()</span>
</pre>


<p>Burada iki decorator ve bu decoratorlerin argümanları var. Option decoratorunun aldığı --count argümanı programa şu özelliği katar:</p>
<p><code>program.py --count</code></p>
<p>Daha sonra gelen ve 1 değerini almış olan <code>default</code> ise varsayılan değeri belirler. Burada varsayılan değerin belirli bir veri tipi yoktur. Ancak belirlenen veri tipini help metninde tür olarak gösterir. Biz sayaç işlemini yapacağımız için 1 dedik. Sonradan gelen <code>help</code> ise bu özelliğe dair yardım metnini gösterir. Yani program.py --help çağırıldığı zaman bu yardım metni de ayrıca gösterilir.</p>
<p>Argument decoratörü ise bir argüman alır. Bu argüman da ayrıca bir default değer alabilir.</p>
<pre class="code literal-block">ali@linux $ hello
Merhaba Ali

ali@linux $ hello --help

Usage: hello.py [OPTIONS] [ISIM]

Options:
  --count INTEGER  Kac defa yazdiracagiz?
  --help           Show this message and exit.
</pre>


<p>Son olarak programı tamamlayalım ve belirtilen miktar adedince yazdırma işlemini yaptıralım.</p>
<pre class="code literal-block"><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s">'--count'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">'Kac defa yazdiracagiz?'</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s">'isim'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">'Ali'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">merhaba</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">isim</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s">'Merhaba </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span> <span class="n">isim</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">merhaba</span><span class="p">()</span>
</pre>


<p>Kodlarımız bunlar. Konsolda şöyle çağırıyoruz.</p>
<pre class="code literal-block">ali@linux $ hello --count=5 Arkadaş?
Merhaba Arkadaş?
Merhaba Arkadaş?
Merhaba Arkadaş?
Merhaba Arkadaş?
Merhaba Arkadaş?
</pre>


<p>Evet şimdilik bu kadar.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/programlama/" rel="tag">programlama</a></li>
            <li><a class="tag p-category" href="../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../e-sayisinin-hesaplanmasi/" rel="prev" title="E Sayısının Hesaplanması">Previous post</a>
            </li>
            <li class="next">
                <a href="../hamming-sayilari/" rel="next" title="Hamming Sayıları">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="aligren",
            disqus_url="https://aligoren.com/python-sys-argv-yerine-click-kullanin/",
        disqus_title="sys.argv Yerine Click Kullan\u0131n",
        disqus_identifier="cache/posts/python-sys-argv-yerine-click-kullanin.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="aligren";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:goren.ali@yandex.com">Ali</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
