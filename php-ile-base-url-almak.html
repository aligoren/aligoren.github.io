<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=".NET, SQL, Python, Açık Kaynak">

    <title>PHP ile Base URL Almak - Ali GÖREN...</title>

    <link rel="canonical" href="https://aligoren.comhttps://aligoren.com/php-ile-base-url-almak">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://aligoren.com/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="https://aligoren.com/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <!-- <link rel="stylesheet" href="https://aligoren.com/css/syntax.css"> -->
    <link rel="stylesheet" href="https://aligoren.com/css/prism.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://aligoren.com/feed.xml" title="Ali GÖREN..." />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://aligoren.com/">Ali GÖREN...</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://aligoren.com/">Anasayfa</a>
                </li>
                
				
                
				
                <li>
                    <a href="https://aligoren.com/hakkimda">Hakkımda</a>
                </li>
				
                
				
                <li>
                    <a href="https://aligoren.com/kategoriler">Kategoriler</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('https://aligoren.com/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1 class="yazibasligi">PHP ile Base URL Almak</h1>
                    
                    <!--<span class="meta">Posted by Ali GÖREN... on December 31, 2016</span>-->
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 yaziici">

				<p>Selamlar. Ufak tefek PHP projeleri ile mevcut bilgimi daha yukarı taşımayı hedefliyorum. Tabi her projede yaşanabilmesi muhtemel bazı sorunları ben de yaşadım. Bu sorunlardan birisi de base url sorunu.</p>

<p>Soruna dair cevabı Stackoverflow üzerinde arıyordum. Bir başlığa denk <a href="http://stackoverflow.com/questions/2820723/how-to-get-base-url-with-php/41407858">geldikten</a> sonra oturup kodunu kendim yazmalıyım dedim.</p>

<p>Sorun şu normalde <code>http://localhost</code> adresi bizim base_url adresimiz fakat proje bir alt klasörde yer alıyorsa o zaman sıkıntılar çıkabiliyor. Çünkü <code>http://localhost/proje</code> böyle bir adrese sahip olabilirsiniz ve dahası bu proje yolunda çalışırken htaccess kullanarak diğer sayfaları sanki bir klasörmüş gibi gösterebilirsiniz. Bu nedenden dolayı da mutlak url’yi yakalamakta sorun yaşayabiliyorsunuz. Bunun birden fazla çözüm yöntemi var. Öncelikle en basit olanını yapalım:</p>

<h2 id="Çözüm-1">Çözüm 1:</h2>

<p>Bu yöntemde, base_url methodu tanımlanır ve o yönteme statik url verilir:</p>

<pre><code class="language-php">function base_url() {
	return 'http://localhost/proje';
}
</code></pre>

<h2 id="Çözüm-2">Çözüm 2:</h2>

<p>Bu yöntemde biraz programlama beceriniz önemli aslında. Ben trait kullandım, çünkü bu kod şu anki projemin bi parçası. Multiple olarak extends işlemi yapamadığım için 5.4 ile gelen traitleri kullanmaya karar verdim.</p>

<h3 id="gereksinimler">Gereksinimler:</h3>

<pre><code>- Gezindiğimiz alan adı: $_SERVER['SERVER_NAME'];
- Şu anda bulunduğumuz sayaf: $_SERVER['REQUEST_URI'];
</code></pre>

<p>Bu işlemde mevcut bulunduğumuz sayfayı PHP’nin <code>str_replace()</code> fonksiyonunu kullanarak temizleyeceğiz. Zaten düz root ise hiçbir şey görünmeyecek. Yok farklı URL’lerde isek o zaman kalan kısım görülecektir. Örneğin şöyle:</p>

<pre><code class="language-php">/*
http://localhost =&gt; return ""
http://localhost/proje =&gt; return "/proje"
*/
</code></pre>

<p>Yukarıdaki gibi bir temizleme işlemi sonrası yapılması gereken PHP’nin <code>explode()</code> fonksiyonunu slash ile kullanarak slashtan sonra gelen ilk değeri almak. Yani şöyle düşünelim:</p>

<pre><code class="language-php">/*
/proje
/proje/abc/
/proje/a/b/c/d/e/f/g
*/
</code></pre>

<p>İlk satırdaki proje değerini almak zaten sıkıntılı değil ama bulunduğunuz sayfa 3. satırdaki gibi ise bir problemimiz var demektir. Bu yüzden explode ile böldüklerimizin ilkini alıyoruz. Bu genelde projenin root dizinidir.</p>

<p>Dizinin altındaki dizinlere maalesef bir çözümüm yok, o durumlarda artık manuel olarak ilk yöntemi denemelisiniz. Neyse bu işlem sonrasında ise dönen array türü değerin 1. indexini çağırıyoruz.</p>

<p>Bu projemizin root olarak görünen klasörüdür. Yani <code>/proje/a/b/c/d/e/f/g</code> gibi bir adresten sadece <strong>proje</strong> değerini alıyoruz. Ve ilk değerin başına tekrar bir slash ekliyoruz Son olarak dönen değer <em>”/”</em> ya da <em>“/proje_kok_dizini”</em> şeklinde oluyor. Aslında senaryo olarak size bu işlemin nasıl yapacağını söylediğime göre kodlaması da basit anlamda kafanızda canlandı. Yine de kodlarını paylaşayım:</p>

<p><strong>url.php</strong></p>

<pre><code class="language-php">trait URL {
    private $url = '';
    private $current_url = '';
    public $get = '';

    function __construct()
    {
        $this-&gt;url = $_SERVER['SERVER_NAME'];
        $this-&gt;current_url = $_SERVER['REQUEST_URI'];

        $clean_server = str_replace('', $this-&gt;url, $this-&gt;current_url);
        $clean_server = explode('/', $clean_server);

        $this-&gt;get = array('base_url' =&gt; "/".$clean_server[1]);
    }
}
</code></pre>

<p><strong>index.php</strong></p>

<pre><code class="language-php">require_once 'url.php'

class Home
{
    use URL;
}

$h = new Home();

// Bu satır HTML kodları içermektedir.
// O yüzden üst kısımda PHP taglerini kapatmalısınız.

&lt;a href="&lt;?=$h-&gt;get['base_url']?&gt;"&gt;Base&lt;/a&gt;
</code></pre>

<p>Bu yazıyı Stackoverflow’da verdiğim <a href="http://stackoverflow.com/a/41407858/3821823">şu</a> cevaptan esinlenerek oluşturdum</p>


                <hr>
                
                  <div id="disqus_thread"></div>
                  <script type="text/javascript">
                    var disqus_shortname  = 'aligren';
                    var disqus_identifier = '/php-ile-base-url-almak';
                    var disqus_title      = "PHP ile Base URL Almak";

                    (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                  <hr>
                
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="https:/aligoren.com/atistirmalik-mongodb-yazisi-2" data-toggle="tooltip" data-placement="top" title="Atıştırmalık MongoDB Yazısı - 2">&larr; Sonraki Yazı</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="https:/aligoren.com/jquery-ile-dinamik-islemler" data-toggle="tooltip" data-placement="top" title="jQuery ile Dinamik İşlemler">Önceki Yazı &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="https://aligoren.com/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/aligoren">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:goren.ali@yandex.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy;  2017</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="https://aligoren.com/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://aligoren.com/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="https://aligoren.com/js/clean-blog.min.js "></script>
<script src="https://aligoren.com/js/prism.js "></script>


    


</body>

</html>
