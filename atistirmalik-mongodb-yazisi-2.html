<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=".NET, SQL, Python, Açık Kaynak">

    <title>Atıştırmalık MongoDB Yazısı - 2 - Ali GÖREN...</title>

    <link rel="canonical" href="https://aligoren.comhttps://aligoren.com/atistirmalik-mongodb-yazisi-2">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://aligoren.com/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="https://aligoren.com/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <!-- <link rel="stylesheet" href="https://aligoren.com/css/syntax.css"> -->
    <link rel="stylesheet" href="https://aligoren.com/css/prism.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://aligoren.com/feed.xml" title="Ali GÖREN..." />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://aligoren.com/">Ali GÖREN...</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://aligoren.com/">Anasayfa</a>
                </li>
                
				
                
				
                <li>
                    <a href="https://aligoren.com/hakkimda">Hakkımda</a>
                </li>
				
                
				
                <li>
                    <a href="https://aligoren.com/kategoriler">Kategoriler</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('https://aligoren.com/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1 class="yazibasligi">Atıştırmalık MongoDB Yazısı - 2</h1>
                    
                    <!--<span class="meta">Posted by Ali GÖREN... on December 17, 2016</span>-->
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 yaziici">

				<p>Selam bu yazı bir önceki <a href="https://aligoren.com/atistirmalik-mongodb-yazisi">Atıştırmalık MongoDB Yazısı</a>‘nın devamı niteliğinde bir yazı.
Bu yazıda MongoDB ile Update ve Delete işlemlerini anlatacağım. Klasik SQL yöntemlerine göre farklılıklar içerdiğini önceki yazımda da belirtmiştim.</p>

<p><img src="/images/posts/mongo.png" alt="/images/posts/mongo.png" /></p>

<h3 id="mongodbyi-dosyadan-okuyalım">MongoDB’yi Dosyadan Okuyalım</h3>

<p>MongoDB için shell güzel bir araç. Ancak uzun Mongo sorgularında shell üzerinde girintiler ve diğer işlemler programlama anlamında pek de kolaylık sağlamıyor.
MongoDB’yi geliştiren ekip böyle durumları tahmin ederek bir kolaylık sağlamış. Örneğin şöyle bir sorguyu shell ile yazdığınızı düşünün:</p>

<pre><code class="language-js">use deneme;

db.x.insert({
	"kolon": "içerik",
	"kolon2": "içerik2",
	"kolon3": "içerik3",
	"kolon4": "içerik4",
	"kolon5": "içerik5",
	"kolon6": "içerik6",
	"kolon7": "içerik7",
	"kolon8": "içerik8",
	"kolon9": "içerik9",
})
</code></pre>

<p>Yukarıdaki sorgulama işlemlerini shell’de yapmak inanın gerçekten zahmetli bir işlem. Bunun için yukarıdaki kodları js uzantılı bir dosyaya kaydedin
<strong>(Farklı uzantıları denemedim)</strong> ve komut satırından şu komutu verin: <code>mongo &lt; dosyaniz.js</code></p>

<p>Evet bu kadar :)</p>

<h3 id="nasıl-yapılıyor-bu-update">Nasıl Yapılıyor Bu Update?</h3>

<p>Yukarıdaki X collection’ında yer alan içeriklerden <code>"kolon4"</code> e ait datayı değiştirelim:</p>

<pre><code class="language-js">db.x.update(
	{
		"kolon4": "Yenilendi"
	}
)
</code></pre>

<p>İstersek şöyle bir sorgu ile kolon4’e ait yeni değeri görüntüleyebiliriz:</p>

<pre><code class="language-js">db.x.find()[1]["kolon4"]
</code></pre>

<p>Tabii bu kesin bir yöntem olmayabiliyor. Bunu anlamanın en kolay olu koleksiyonu yazdırmanızdan geçiyor. Hem eski değer hem de yeni değer görülebiliyor.
Tabii yaptığınız işlem sonucunda <strong>nInserted</strong> yerine <strong>nModified</strong> içinde bir rakam göreceksiniz.</p>

<p>Yine aynı şekilde <a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany">updateMany</a> ve <a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne">updateOne</a> metodlarını kullanarak çoklu ya da tekil güncelleme işlemlerini de yapabilirsiniz. Bu iki metoda değinmiyorum çünkü Many ve One ne işe yarıyor bunları önceki yazıda anlatmıştım. Kullanımdan kaynaklı farklılılar var sadece.</p>

<p>Bunlar haricinde yeni bir metodla karşılaşıyoruz. Bu metodun adı <strong>replaceOne()</strong> evet bu yeni metod, koşulda eşleşme gerçekleşirse gerçekleşen ilk eşleşmeye işlem yapar.
Örneği bir SQL cümlesinden verelim:</p>

<pre><code class="language-sql">SELECT * FROM Kullanicilar WHERE Adi='Ali'
</code></pre>

<p>Yukarıdaki satır birden fazla Ali kullanıcısını döndürebilir. Ancak <strong>replaceOne()</strong> metodu dönen bu değerlerden ilk olanını bulur ve güncelleme işlemini yapar.
Örnek kullanımı şöyledir:</p>

<pre><code class="language-js">db.x.replaceOne(
	{
		kolon: "icerik"
	},
	{
		kolon: "Yeni icerik"
	}
)

/*
ÇIKTISI:

{ "acknowledged" : true, "matchedCount" : 1, "modifiedCount" : 1 }
*/
</code></pre>

<p>İsterseniz <strong>db.x.find()</strong> diyerek çıkan sonucu görüntüleyebilirsiniz:</p>

<pre><code class="language-json">{ "_id" : ObjectId("5856e7347db38a7560ec56ae"), "kolon" : "Yeni icerik" }
</code></pre>

<p>Güncelleme işlemleri sadece bu kadarla sınırlığı değil. Bu işlemleri siz verdiğim linklerden daha geniş bir şekilde öğrenebilirsiniz.</p>

<h3 id="nasıl-sileceğiz">Nasıl Sileceğiz?</h3>

<p>RDBMS kullananlar olarak önceki alışkanlıklarımızdan kopamıyoruz. MongoDB’de bu alışkanlıklardan kopabilmiş değil.
Evet tahmin edildiği üzere silme işlemi destekliyor MongoDB. Ancak biraz farklı. Bunun için şu metodları bize sunuyor:</p>

<pre><code>- remove()
- deleteOne()
- deleteMany()
</code></pre>

<p><strong>remove Metodu</strong></p>

<p>Bunlardan ilki olan <strong>remove()</strong> metoduyla tek seferde tüm koleksiyonu silebildiğimiz gibi koşul kullanarak koleksiyonda toplu silme de yapabiliriz.
Burada bilmemiz gereken toplu silme yaptığımızdır.</p>

<p>Örnek herhangi bir koşula bağlı olmaksızın tüm <strong>x</strong> koleksiyonunu silen sorgu kodunu verelim:</p>

<pre><code class="language-js">db.x.remove( {} )
</code></pre>

<p>Eğer bu silme işleminin bütün tablo geneline değil de sadece belirli değerlere yansımasını istiyorsak şöyle yapmalıyız:</p>

<pre><code class="language-js">db.x.remove({ 
    "kolon": "Bir İçerik"
})
</code></pre>

<p>Artık bu sayede içinde <strong>Bir İçerik</strong> geçen yani tam eşleşme sağlayan tüm değerler x tablosundan silinecektir.
Tüm dokümana <a href="https://docs.mongodb.com/manual/reference/method/db.collection.remove/#db.collection.remove">buradan</a> bakabilirsiniz.</p>

<p><strong>deleteOne() Metodu</strong></p>

<p>Yine geldik One’lı Many’li metodlara. Mantığı artık söylememe gerek yok. Sadece nasıl çalıştıklarını belirtip bu yazıyı noktalayacağım.
Tamamını anlatmıyorum çünkü artık siz de ben de ufak bilgilere sahibiz ve MongoDB dokümanlarına erişebilir durumdayız :)</p>

<pre><code class="language-js">db.x.deleteOne( { "_id" : ObjectId("5856e7347db38a7560ec56ae") } );

/*
ÇIKTISI:

{ "acknowledged" : true, "deletedCount" : 1 }
*/
</code></pre>

<p>Yukarıdaki işlemin klasik SQL sorgusu şöyle:</p>

<pre><code class="language-sql">DELETE FROM Kullanicilar WHERE ID=2
</code></pre>

<p><strong>deleteMany() Metodu</strong></p>

<p>İstersek çoklu silme işlemlerini de yapabiliriz. Fakat buradan şunu anlamayalım. Örneğin ID’si 1,2,3,4,5,6 olanları tek tek yazacağız gibi bir şey anlamayalım.
Burada aslında <strong>remove()</strong> metodundaki toplu silmenin bir benzerini yapabiliriz. Örnek:</p>

<pre><code class="language-js">db.x.deleteMany( { "kolon" : "A Değeri" } );

/*
ÇIKTISI:

{ "acknowledged" : true, "deletedCount" : 1 }
*/
</code></pre>

<p>Yukarıda <strong>A Değeri</strong> sadece 1 adet olduğu için silindiğinde de <strong>deletedCount</strong> 1 değerini döndürmüştür. Eğer 10 adet aynı değere sahip kayıt olsaydı o değer 10 olacaktı.</p>

<h2 id="kaynaklar">Kaynaklar</h2>

<p><a href="https://docs.mongodb.com/manual/tutorial/update-documents/#update">Update İşlemleri - MongoDB Resmi Dokümanı</a></p>

<p><a href="https://docs.mongodb.com/manual/tutorial/remove-documents/#delete-methods">Delete İşlemleri - MongoDB Resmi Dokümanı</a></p>


                <hr>
                
                  <div id="disqus_thread"></div>
                  <script type="text/javascript">
                    var disqus_shortname  = 'aligren';
                    var disqus_identifier = '/atistirmalik-mongodb-yazisi-2';
                    var disqus_title      = "Atıştırmalık MongoDB Yazısı - 2";

                    (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                  <hr>
                
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="https:/aligoren.com/atistirmalik-mongodb-yazisi" data-toggle="tooltip" data-placement="top" title="Atıştırmalık MongoDB Yazısı">&larr; Sonraki Yazı</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="https:/aligoren.com/php-ile-base-url-almak" data-toggle="tooltip" data-placement="top" title="PHP ile Base URL Almak">Önceki Yazı &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="https://aligoren.com/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/aligoren">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:goren.ali@yandex.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy;  2017</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="https://aligoren.com/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://aligoren.com/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="https://aligoren.com/js/clean-blog.min.js "></script>
<script src="https://aligoren.com/js/prism.js "></script>


    


</body>

</html>
